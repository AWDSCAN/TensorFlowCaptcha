# éªŒè¯ç é•¿åº¦ä¼˜åŒ– - 2026å¹´2æœˆ2æ—¥

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

ç®€åŒ–éªŒè¯ç é•¿åº¦è§„åˆ™ï¼Œæé«˜è®­ç»ƒæ•ˆç‡å’Œè¯†åˆ«å‡†ç¡®ç‡ã€‚

## ğŸ“Š ä¼˜åŒ–å†…å®¹

### 1. éªŒè¯ç é•¿åº¦é™åˆ¶

**ä¼˜åŒ–å‰ï¼š**
- æ™®é€šéªŒè¯ç ï¼š1-8ä½ä¸å®šé•¿ï¼ˆè¿‡äºå¤æ‚ï¼‰
- æ•°å­¦é¢˜ï¼šæ ¹æ®æ•°å­—èŒƒå›´åŠ¨æ€ç”Ÿæˆï¼ˆ1-20çš„æ•°ï¼‰

**ä¼˜åŒ–åï¼š**
- **æ™®é€šéªŒè¯ç ï¼ˆæ•°å­—/å­—æ¯/æ··åˆï¼‰**ï¼šå›ºå®šä¸º **4ä½** æˆ– **6ä½**
- **æ•°å­¦é¢˜éªŒè¯ç **ï¼š
  - ä¸€ä½æ•°è¿ç®—ï¼š**5ä½**ï¼ˆå¦‚ `8-2=?`ï¼‰
  - ä¸¤ä½æ•°è¿ç®—ï¼š**7ä½**ï¼ˆå¦‚ `12*24=?`ï¼‰

### 2. æ•°å­¦é¢˜è¿ç®—èŒƒå›´ä¼˜åŒ–

**ä¼˜åŒ–å‰ï¼š**
```python
num1 = random.randint(1, 20)  # 1-20èŒƒå›´
num2 = random.randint(1, 20)
ä¹˜æ³•ï¼šrandom.randint(1, 10)  # ç‰¹æ®Šå¤„ç†
```

**ä¼˜åŒ–åï¼š**
```python
# 50%æ¦‚ç‡é€‰æ‹©ä¸€ä½æ•°æˆ–ä¸¤ä½æ•°è¿ç®—
ä¸€ä½æ•°è¿ç®—: num1, num2 = random.randint(1, 9)   # 1-9
ä¸¤ä½æ•°è¿ç®—: num1, num2 = random.randint(10, 99)  # 10-99
```

## ğŸ”§ ä¿®æ”¹æ–‡ä»¶

### 1. captcha/generate_captcha.py

ä¿®æ”¹ `get_random_text()` æ–¹æ³•ï¼š

```python
def get_random_text(self, min_len=4, max_len=8):
    """
    æ ¹æ®ç±»å‹ç”ŸæˆéšæœºéªŒè¯ç æ–‡æœ¬
    æ–°è§„åˆ™ï¼šéªŒè¯ç é•¿åº¦åªæœ‰4ä½æˆ–6ä½
    """
    if self.captcha_type == 'digit':
        length = random.choice([4, 6])  # åªæœ‰4ä½æˆ–6ä½
        text = ''.join(random.choices(self.digits, k=length))
        return text, text
    
    elif self.captcha_type == 'math':
        use_two_digits = random.random() < 0.5
        
        if use_two_digits:
            # ä¸¤ä½æ•°è¿ç®—ï¼ˆ7ä½ï¼Œå¦‚"12*24=?"ï¼‰
            num1 = random.randint(10, 99)
            num2 = random.randint(10, 99)
        else:
            # ä¸€ä½æ•°è¿ç®—ï¼ˆ5ä½ï¼Œå¦‚"8-2=?"ï¼‰
            num1 = random.randint(1, 9)
            num2 = random.randint(1, 9)
        
        # ... è¿ç®—é€»è¾‘
```

### 2. caocrvfy/core/config.py

ä¿®æ”¹ `MAX_CAPTCHA` é…ç½®ï¼š

```python
# éªŒè¯ç æœ€å¤§é•¿åº¦
# æ–°è§„åˆ™ï¼šæ”¯æŒ4ä½ã€6ä½æ™®é€šéªŒè¯ç ï¼Œä»¥åŠ5ä½(ä¸€ä½æ•°è¿ç®—)å’Œ7ä½(ä¸¤ä½æ•°è¿ç®—)æ•°å­¦é¢˜
# ç»Ÿä¸€è®¾ç½®ä¸º7ä»¥æ”¯æŒæœ€é•¿æƒ…å†µï¼ˆä¸¤ä½æ•°è¿ç®—å¦‚"12*24=?"ï¼‰
MAX_CAPTCHA = 7  # ä»8æ”¹ä¸º7
```

**è¾“å‡ºç»´åº¦å˜åŒ–ï¼š**
- ä¼˜åŒ–å‰ï¼š`8 Ã— 68 = 544`
- ä¼˜åŒ–åï¼š`7 Ã— 68 = 476`

## âœ… ä¼˜åŒ–æ•ˆæœ

### 1. ç®€åŒ–è®­ç»ƒå¤æ‚åº¦

| ç±»å‹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | å‡å°‘æ¯”ä¾‹ |
|------|--------|--------|----------|
| æ™®é€šéªŒè¯ç é•¿åº¦ç§ç±» | 8ç§(1-8ä½) | 2ç§(4/6ä½) | **75%** |
| æ•°å­¦é¢˜é•¿åº¦ç§ç±» | å¤šç§(3-8ä½) | 2ç§(5/7ä½) | **~70%** |
| è¾“å‡ºç»´åº¦ | 544 | 476 | **12.5%** |

### 2. æå‡è¯†åˆ«å‡†ç¡®ç‡

**é¢„æœŸæ•ˆæœï¼š**
- âœ… å‡å°‘é•¿åº¦æ­§ä¹‰ï¼Œæé«˜å®šä½å‡†ç¡®ç‡
- âœ… æ•°å­¦é¢˜ä½æ•°å›ºå®šï¼Œä¾¿äºæ¨¡å‹å­¦ä¹ æ•°å­—ä½ç½®æ¨¡å¼
- âœ… é™ä½æ¨¡å‹å‚æ•°é‡ï¼ŒåŠ å¿«è®­ç»ƒé€Ÿåº¦
- âœ… 4ä½å’Œ6ä½åˆ†å¸ƒå‡è¡¡ï¼Œé¿å…é•¿åº¦åå·®

### 3. æ•°å­¦é¢˜è¯†åˆ«ä¼˜åŒ–

**ä¸€ä½æ•°è¿ç®—ï¼ˆ5ä½ï¼Œå¦‚ `8-2=?`ï¼‰ï¼š**
- ç®€å•æ¸…æ™°ï¼Œæ˜“äºè¯†åˆ«
- é€‚åˆæ¨¡å‹åˆæœŸè®­ç»ƒ
- é¢˜ç›®æ ¼å¼ï¼š`æ•°å­— è¿ç®—ç¬¦ æ•°å­— = ?`

**ä¸¤ä½æ•°è¿ç®—ï¼ˆ7ä½ï¼Œå¦‚ `12*24=?`ï¼‰ï¼š**
- å¢åŠ éš¾åº¦ï¼Œä½†é•¿åº¦å›ºå®š
- é¢˜ç›®æ ¼å¼ï¼š`æ•°å­—æ•°å­— è¿ç®—ç¬¦ æ•°å­—æ•°å­— = ?`
- æ•°å­—ä½ç½®å›ºå®šï¼Œä¾¿äºæ¨¡å‹å­¦ä¹ 

## ğŸ§ª æµ‹è¯•éªŒè¯

è¿è¡Œç”Ÿæˆæµ‹è¯•ï¼š
```bash
cd captcha
python generate_captcha.py
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
ã€çº¯æ•°å­—ã€‘
  1770        # 4ä½
  335383      # 6ä½
  3372        # 4ä½

ã€æ•°å­—+å­—æ¯æ··åˆã€‘
  JN3t        # 4ä½
  zW2s        # 4ä½
  SJWZ        # 4ä½

ã€æ•°å­¦ç®—æœ¯é¢˜ã€‘
  95+11=?     # 7ä½ï¼ˆä¸¤ä½æ•°è¿ç®—ï¼‰
  43-37=?     # 7ä½ï¼ˆä¸¤ä½æ•°è¿ç®—ï¼‰
  8-2=?       # 5ä½ï¼ˆä¸€ä½æ•°è¿ç®—ï¼‰
```

## ğŸ“ˆ è®­ç»ƒå»ºè®®

1. **é‡æ–°ç”Ÿæˆè®­ç»ƒæ•°æ®é›†**
   ```bash
   # ç”Ÿæˆæ–°çš„è®­ç»ƒæ•°æ®ï¼ˆç¬¦åˆ4/6ä½è§„åˆ™ï¼‰
   python generate_training_data.py --count 50000
   ```

2. **æ›´æ–°æ¨¡å‹ç»“æ„**
   - è¾“å‡ºå±‚è°ƒæ•´ï¼š`7 Ã— 68 = 476` ç»´åº¦
   - æ¨¡å‹ä¼šè‡ªåŠ¨æ ¹æ® `config.MAX_CAPTCHA` è°ƒæ•´

3. **è®­ç»ƒç­–ç•¥**
   - éªŒè¯ç é•¿åº¦å˜åŒ–ï¼šä»8â†’7ï¼ˆ-12.5%ï¼‰
   - é¢„æœŸè®­ç»ƒé€Ÿåº¦æå‡ï¼š5-10%
   - é¢„æœŸå‡†ç¡®ç‡æå‡ï¼š3-5%

4. **æ•°æ®åˆ†å¸ƒå»ºè®®**
   - æ™®é€šéªŒè¯ç ï¼š60%ï¼ˆ4ä½å’Œ6ä½å„åŠï¼‰
   - æ•°å­¦é¢˜ï¼š40%ï¼ˆä¸€ä½æ•°å’Œä¸¤ä½æ•°å„åŠï¼‰

## ğŸ”„ å‘åå…¼å®¹

**æ—§æ•°æ®é›†å¤„ç†ï¼š**
- æ—§çš„8ä½éªŒè¯ç æ•°æ®ä»å¯ä½¿ç”¨ï¼ˆä¼šè¢«å¡«å……åˆ°7ä½ï¼‰
- å»ºè®®é€æ­¥æ›¿æ¢ä¸ºæ–°æ ¼å¼æ•°æ®
- æ··åˆè®­ç»ƒè¿‡æ¸¡æœŸï¼š30%æ—§æ•°æ® + 70%æ–°æ•°æ®

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

1. **é•¿åº¦æƒé‡è°ƒæ•´**
   - 4ä½éªŒè¯ç ï¼šæƒé‡1.0ï¼ˆç®€å•ï¼‰
   - 6ä½éªŒè¯ç ï¼šæƒé‡1.2ï¼ˆä¸­ç­‰ï¼‰
   - 5ä½æ•°å­¦é¢˜ï¼šæƒé‡1.3ï¼ˆè¾ƒéš¾ï¼‰
   - 7ä½æ•°å­¦é¢˜ï¼šæƒé‡1.5ï¼ˆæœ€éš¾ï¼‰

2. **åˆ†é˜¶æ®µè®­ç»ƒ**
   - ç¬¬ä¸€é˜¶æ®µï¼šä»…4ä½æ™®é€šéªŒè¯ç ï¼ˆå¿«é€Ÿæ”¶æ•›ï¼‰
   - ç¬¬äºŒé˜¶æ®µï¼šåŠ å…¥6ä½æ™®é€šéªŒè¯ç 
   - ç¬¬ä¸‰é˜¶æ®µï¼šåŠ å…¥5ä½æ•°å­¦é¢˜
   - ç¬¬å››é˜¶æ®µï¼šåŠ å…¥7ä½æ•°å­¦é¢˜ï¼ˆå…¨é‡è®­ç»ƒï¼‰

3. **æ•°æ®å¢å¼º**
   - å¯¹çŸ­éªŒè¯ç ï¼ˆ4ä½ï¼‰å¢åŠ æ›´å¤šå¹²æ‰°
   - å¯¹æ•°å­¦é¢˜ä¿æŒç®€æ´ï¼ˆæ— å¹²æ‰°çº¿ï¼‰

## âœ¨ æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–é€šè¿‡ç®€åŒ–éªŒè¯ç é•¿åº¦è§„åˆ™ï¼Œä½¿è®­ç»ƒç›®æ ‡æ›´åŠ æ˜ç¡®ï¼š
- âœ… **å›ºå®šé•¿åº¦ç»„åˆ**ï¼š4ä½ã€6ä½ã€5ä½ã€7ä½ï¼ˆè€Œé1-8ä½ä»»æ„é•¿åº¦ï¼‰
- âœ… **æ•°å­¦é¢˜è§„èŒƒåŒ–**ï¼šä¸€ä½æ•°è¿ç®—(5ä½) å’Œ ä¸¤ä½æ•°è¿ç®—(7ä½)
- âœ… **é™ä½å¤æ‚åº¦**ï¼šè¾“å‡ºç»´åº¦ä»544é™è‡³476
- âœ… **æå‡æ•ˆç‡**ï¼šé¢„æœŸè®­ç»ƒé€Ÿåº¦å’Œå‡†ç¡®ç‡å‡æœ‰æå‡

---

**ä¿®æ”¹æ—¥æœŸ**: 2026å¹´2æœˆ2æ—¥  
**ä¿®æ”¹äºº**: AI Assistant  
**å½±å“èŒƒå›´**: éªŒè¯ç ç”Ÿæˆã€æ¨¡å‹é…ç½®  
**å»ºè®®è¡ŒåŠ¨**: é‡æ–°ç”Ÿæˆè®­ç»ƒæ•°æ®ï¼Œé‡æ–°è®­ç»ƒæ¨¡å‹
